@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Apple-like color system */
    --background: 255 255 255;
    --foreground: 29 29 31;
    --card: 255 255 255;
    --card-foreground: 29 29 31;
    --popover: 255 255 255;
    --popover-foreground: 29 29 31;
    --primary: 0 122 255;
    --primary-foreground: 255 255 255;
    --secondary: 242 242 247;
    --secondary-foreground: 29 29 31;
    --muted: 245 245 247;
    --muted-foreground: 142 142 147;
    --accent: 245 245 247;
    --accent-foreground: 29 29 31;
    --destructive: 255 69 58;
    --destructive-foreground: 255 255 255;
    --border: 230 230 235;
    --input: 230 230 235;
    --ring: 147 197 253;
    --radius: 0.75rem;
  }

  .dark {
    --background: 16 16 18;
    --foreground: 242 242 245;
    --card: 22 22 24;
    --card-foreground: 242 242 245;
    --popover: 22 22 24;
    --popover-foreground: 242 242 245;
    --primary: 10 132 255;
    --primary-foreground: 255 255 255;
    --secondary: 40 40 44;
    --secondary-foreground: 242 242 245;
    --muted: 30 30 34;
    --muted-foreground: 172 172 177;
    --accent: 30 30 34;
    --accent-foreground: 242 242 245;
    --destructive: 255 69 58;
    --destructive-foreground: 255 255 255;
    --border: 40 40 44;
    --input: 40 40 44;
    --ring: 147 197 253;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* RTL Support */
[dir="rtl"] {
  direction: rtl;
}

[dir="rtl"] .rtl-flip {
  transform: scaleX(-1);
}

/* Apple-like button styles */
@layer components {
  .btn-apple {
    @apply inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium transition-all duration-200;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
    @apply disabled:pointer-events-none disabled:opacity-50;
  }

  .btn-apple-primary {
    @apply btn-apple;
    @apply bg-primary text-primary-foreground shadow-sm hover:shadow active:scale-95;
  }

  .btn-apple-secondary {
    @apply btn-apple;
    @apply bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 active:scale-95;
  }

  .btn-apple-ghost {
    @apply btn-apple;
    @apply hover:bg-accent hover:text-accent-foreground active:bg-accent/50;
  }

  .btn-apple-outline {
    @apply btn-apple;
    @apply border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground active:bg-accent/50;
  }
}

/* Apple-like card */
@layer components {
  .card-apple {
    @apply bg-card text-card-foreground rounded-2xl;
    @apply border border-border/50 shadow-sm;
    @apply transition-all duration-200;
  }

  .card-apple-hover {
    @apply hover:shadow-md hover:border-border;
  }
}

/* Apple-like input */
@layer components {
  .input-apple {
    @apply flex h-11 w-full rounded-xl border border-input bg-background px-4 py-2.5;
    @apply text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium;
    @apply placeholder:text-muted-foreground/70;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
    @apply disabled:cursor-not-allowed disabled:opacity-50;
    @apply transition-all duration-200;
  }
}

/* React Flow Styles - Apple-like */
.react-flow__node {
  cursor: pointer;
}

.react-flow__node.selected .node-card {
  @apply ring-2 ring-primary/50 ring-offset-2;
}

.react-flow__handle {
  @apply w-3 h-3 bg-gray-300/50 rounded-full;
  @apply transition-all duration-200;
}

.react-flow__handle:hover {
  @apply w-4 h-4 bg-primary/50;
}

.react-flow__edge-path {
  @apply stroke-gray-300/50 stroke-2;
  @apply transition-all duration-200;
}

.react-flow__edge:hover .react-flow__edge-path {
  @apply stroke-primary/70;
}

.react-flow__controls {
  @apply bg-background/95 backdrop-blur-xl border border-border/50 rounded-2xl shadow-lg;
  @apply transition-all duration-200;
}

.react-flow__controls-button {
  @apply bg-transparent hover:bg-muted/50 rounded-xl;
  @apply transition-all duration-200;
}

.react-flow__minimap {
  @apply bg-background/95 backdrop-blur-xl border border-border/50 rounded-2xl;
  @apply transition-all duration-200;
}

/* Person card in tree - Apple-like */
.person-card {
  @apply bg-white rounded-2xl shadow-sm border border-border/50 p-4;
  @apply min-w-[160px] transition-all duration-200 hover:shadow-md hover:scale-[1.02];
}

.person-card.male {
  @apply border-l-4 border-l-blue-500;
}

.person-card.female {
  @apply border-l-4 border-l-pink-500;
}

.person-card.other {
  @apply border-l-4 border-l-purple-500;
}

/* Custom scrollbar - Apple-like */
::-webkit-scrollbar {
  @apply w-2 h-2;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-200 rounded-full hover:bg-gray-300;
}

.dark ::-webkit-scrollbar-thumb {
  @apply bg-gray-700 rounded-full hover:bg-gray-600;
}

/* Smooth transitions */
* {
  @apply transition-colors duration-200;
}
*:not(button, a, input, textarea, select) {
  @apply transition-transform duration-200;
}
button, a {
  @apply transition-all duration-200;
}

/* Apple-like focus ring */
.focus-ring-apple {
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:ring-offset-2;
}

/* Glassmorphism effect */
.glass {
  @apply backdrop-blur-xl bg-background/60;
}

/* Subtle animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.4s ease-out;
}

/* Remove transitions from specific elements */
.no-transition {
  transition: none !important;
}
